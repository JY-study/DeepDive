# 13. 전역 변수의 문제점

## 생명주기

- 전역변수의 생명주기: 선언에 의해 생성 → 할당을 통해 값을 가짐 → 언젠가 소멸
- 지역변수의 생명주기: 함수가 호출되면 생성 → 할당을 통해 값을 가짐 → 함수가 종료되면 소멸 = 함수의 생명 주기와 일치

```js
var x = 'global';

function foo() {
  console.log(x); // undefined
  var x = 'local';
  console.log(x); // local
}

foo();
console.log(x); // global
```

<img width='600px' src="https://user-images.githubusercontent.com/85178602/228402400-cc226714-0bdb-4730-a4ec-10efc3d31f6b.png" />

일반적으로 함수가 종료되면 함수가 생성한 스코프도 소멸하지만, 누군가가 **스코프를 참고하고 있다면 스코프는 해제되지 않고 남아있게 된다.**

**함수 내부에서 선언된 지역 변수**는 **함수가 생성한 스코프에 등록**되기 때문에<br>
변수는 _자신이 등록된 스코프가 소멸되기 전까지 유효_ 하며 **스코프가 소멸되지 않고 남아있다면 변수도 남아있게 된다.**

## 전역 변수를 사용했을 때 생길 수 있는 문제점

1. **암묵적 결합**: 모든 코드가 전역 변수를 참조하고 변경할 수 있음 <br>
   전역 변수를 선언하게 되면 **코드 어디서든 참조하고 할당**할 수 있게 된다.<br>
   변수의 유효 범위가 크면 클수록 코드의 가독성은 나빠지고 의도치 않게 상태가 변경될 수 있는 위험성이 높아지기 때문에 지양해야 한다.

2. **긴 생명 주기** <br>
   전역 변수는 **생명주기가 길기 때문에** 메모리 리소스도 오랜 기간 소비되는 만큼 **전역 변수의 상태를 변경할 수 있는 시간이 길어지며**,<br>
   변수의 중복 선언이 가능한 var 키워드는 **의도치 않은 재할당**도 허용한다.<br>
   전역 변수보다 생명 주기가 훨씬 짧은 지역 변수를 사용하여 상태 변경에 의한 오류 발생 확률을 줄이고, 메모리 리소스 소비 기간도 줄이자.

3. **스코프 체인 상에서 종점에 존재** <br>
   전역 변수는 스코프 체인 상에서 마지막에 존재하기 때문에 **변수를 검색할 시 가장 마지막에 검색**된다.<br>
   그렇기 때문에 검색 속도가 가장 느리다.

4. **네임스페이스 오염** <br>
   자바스크립트는 파일이 분리되어 있어도 **하나의 전역 스코프를 공유**하기 때문에<br>
   동일한 이름으로 명명된 전역 변수, 전역 함수는 같은 스코프 내에 존재할 경우 예상치 못한 결과를 가져올 수 있어 주의해야 한다.
