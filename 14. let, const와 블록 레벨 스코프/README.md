# 14. let, const와 블록 레벨 스코프

| **var키워드의 문제점**

1. 변수 중복 선언 허용 - 변수가 선언되어도 변수를 중복 선언할 수 있어서 **의도치 않게 재할당**될 수 있다. <br>
2. 함수 레벨 스코프 - 함수의 코드 블록만 지역 스코프로 인정하고, **함수 외부에서 변수를 선언할 경우 전역 변수**가 된다. <br>
3. 변수 호이스팅 - 변수에 값을 할당하기 전에 이미 초기화가 되어 **변수 선언문 이전에 참조**할 수 있다. <br>
   (에러가 발생하진 않지만, 코드 흐름상 맞지 않고 가독성을 떨어뜨리며 오류를 발생시킬 여지가 생긴다)

## var 키워드가 보완된 let 키워드

1. 변수 중복 선언 금지 <br>
2. 블록 레벨 스코프

   ```js
   let foo = 1; // 전역 변수
   {
     let foo = 2; // 지역 변수
     let bar = 3; // 지역 변수
   }
   console.log(foo); // 1
   console.log(bar); // ReferenceError

   // var키워드였다면?
   var foo = 1; // 전역 변수
   {
     var foo = 2; // 지역 변수
     var bar = 3; // 지역 변수
   }
   console.log(foo); // 2
   console.log(bar); // 3
   ```

   <img width='400px' src="https://user-images.githubusercontent.com/85178602/228845216-b80d4d88-f07b-4a19-a739-aeb9be941a39.png"/>

3. 변수 호이스팅

   런타임 이전에 선언, 초기화 단계가 실행되는 `var` 키워드와 달리<br>
   `let` 키워드로 선언한 변수는 **선언 단계와 초기화 단계가 분리**되어 진행된다.<br>

   즉, `let` 키워드도 변수 호이스팅이 발생하여 _선언 단계가 먼저 실행_ 되지만,<br>
   **초기화는 변수 선언문에 도달했을 때 실행**되기 때문에 _변수 선언문 이전에 참조할 수 없다._ <br>
   → **일시적 사각지대(TemporalDeadZone)** 스코프의 시작 지점부터 초기화 시작 지점까지 변수를 참조할 수 없는 구간

   ```js
   console.log(foo); // ReferenceError
   let foo; // 초기화 단계
   console.log(foo); // undefined
   foo = 1; // 할당 단계
   console.log(foo); // 1

   // var키워드였다면?
   // 이미 선언, 초기화 단계 실행됨
   console.log(bar); // undefined
   var bar;
   console.log(bar); // undefined
   bar = 1; // 할당 단계
   console.log(bar); // 1
   ```

   <img width='400px' src='https://user-images.githubusercontent.com/85178602/228845379-a47b0c89-6202-43f7-9e02-f7c87b7c0414.png'/>

## const 키워드와 let키워드의 차이점

1. 선언과 초기화

   `const`로 선언한 변수는 꼭! 선언과 동시에 초기화해야한다.

   ```js
   const foo; //SyntaxError
   const bar = 1; // 선언, 초기화 동시에 해야함
   ```

2. 재할당 금지

   `const`로 선언된 변수에 변경할 수 없는 값인 원시 값을 할당한 경우 **const 키워드에 의해 재할당이 금지**되므로<br>
   할당된 원시 값을 변경할 수 있는 방법은 없다.

3. 상수

   변수: 언제든지 재할당을 통해 변수 값을 변경할 수 있다.<br>
   ↔ 상수: 재할당이 금지된 변수, 상수도 값을 저장하기 위한 메모리 공간이 필요하므로 변수이긴 하다.

   상수는 프로그램 전체에서 공통적으로 사용하므로 나중에 값이 변경되면 상수만 변경하면 되기 때문에 유지보수성이 매우 향상된다.

4. 객체

   `const`로 선언된 변수에 객체를 할당한 경우 값을 변경할 수 있다. <br>
   `const`는 재할당을 금지할 뿐 **불변을 의미하지는 않는다.**

---

변수를 선언할 땐 기본적으로 의도치 않은 재할당을 방지할 수 있는 `const`를 사용하고,<br>
`let`은 재할당이 필요한 경우에 한해 사용하는 것이 좋다는 생각이 든다.<br>
재할당이 필요한지 잘 모를 땐 무조건 `const`를 사용하자.
